<assembly
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">

    <formats>
        <format>tar.gz</format>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>src/main/resources</directory>
            <outputDirectory>mule-ibeans</outputDirectory>
            <excludes>
                <exclude>conf</exclude>
            </excludes>
        </fileSet>
        <!-- updater tool -->
        <fileSet>
            <directory>../tools/updater/target</directory>
            <outputDirectory>mule-ibeans/tools</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <!-- Shell tool -->
        <fileSet>
            <directory>../tools/shell/src/main/resources</directory>
            <outputDirectory>mule-ibeans/tools/shell</outputDirectory>
            <includes>
                <include>*.*</include>
            </includes>
            <excludes>
                <exclude>ibeanssh*</exclude>
                <exclude>cp*</exclude>
            </excludes>
        </fileSet>

        <fileSet>
            <directory>../tools/shell/src/main/resources</directory>
            <outputDirectory>mule-ibeans/tools/shell</outputDirectory>
            <includes>
                <include>ibeanssh*</include>
                <include>cp*</include>
            </includes>
            <fileMode>755</fileMode>
        </fileSet>
        <!-- template projects -->
        <!-- iBeans project template -->
        <fileSet>
            <directory>../tools/archetype-tests/ibean/target/template</directory>
            <outputDirectory>mule-ibeans/templates/ibean-template</outputDirectory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>**/.settings</exclude>
                <exclude>**/target</exclude>
            </excludes>

        </fileSet>

        <!-- iBeans webapp template -->
        <fileSet>
            <directory>../tools/archetype-tests/ibeans-webapp/target/template</directory>
            <outputDirectory>mule-ibeans/templates/webapp-template</outputDirectory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>**/.settings</exclude>
                <exclude>**/target</exclude>
            </excludes>
        </fileSet>

        <!-- iBeans Console -->
        <fileSet>
            <directory>../console/target</directory>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
            <includes>
                <include>*.war</include>
            </includes>
        </fileSet>
        <!-- example WARS -->
        <!--<fileSet>-->
        <!--<directory>../examples/geomail/target</directory>-->
        <!--<outputDirectory>mule-ibeans/webapps</outputDirectory>-->
        <!--<includes>-->
        <!--<include>*.war</include>-->
        <!--</includes>-->
        <!--</fileSet>-->
        <!--<fileSet>-->
        <!--<directory>../examples/bookstore-admin-web/target</directory>-->
        <!--<outputDirectory>webapps</outputDirectory>-->
        <!--<includes>-->
        <!--<include>*.war</include>-->
        <!--</includes>-->
        <!--</fileSet>-->
        <!--<fileSet>-->
        <!--<directory>../examples/bookstore-web/target</directory>-->
        <!--<outputDirectory>webapps</outputDirectory>-->
        <!--<includes>-->
        <!--<include>*.war</include>-->
        <!--</includes>-->
        <!--</fileSet>-->
        <fileSet>
            <directory>../examples/gpswalker/target</directory>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
            <includes>
                <include>*.war</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../examples/notifications/target</directory>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
            <includes>
                <include>*.war</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../examples/ibeans-examples/target</directory>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
            <includes>
                <include>*.war</include>
            </includes>
        </fileSet>
        <!-- iBeans we ship with (note filtering is pretty dumb) -->
        <fileSet>
            <directory>../ibeans-central/twitter/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../ibeans-central/hostip/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../ibeans-central/flickr/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../ibeans-central/gmail/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../ibeans-central/email/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../ibeans-central/bitly/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../ibeans-central/googlebase/target</directory>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>

        <!-- sources -->
        <fileSet>
            <directory>../target</directory>
            <outputDirectory>mule-ibeans/src</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <!-- apidocs -->
        <fileSet>
            <directory>../target/site/apidocs</directory>
            <outputDirectory>mule-ibeans/doc/api</outputDirectory>
        </fileSet>
    </fileSets>
    <dependencySets>
        <!-- Core module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-core</include>
            </includes>
        </dependencySet>

        <!-- shell module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/shell</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-shell</include>
            </includes>
        </dependencySet>

        <!-- email module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/email</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-email</include>
            </includes>
        </dependencySet>

        <!-- jms module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/jms-client</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-jms-client</include>
            </includes>
        </dependencySet>

        <!-- Rest module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/rest</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-rest</include>
            </includes>
        </dependencySet>

        <!-- jdbc module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/jdbc</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.transports:mule-transport-jdbc</include>-->
        <!--</includes>-->
        <!--<excludes>-->
        <!--<exclude>org.springframework:*</exclude>-->
        <!--<exclude>org.mule.modules:mule-module-spring-config</exclude>-->
        <!--<exclude>net.sf.saxon:*</exclude>-->
        <!--</excludes>-->
        <!--</dependencySet>-->

        <!-- Web services module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/ws</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.transports:mule-transport-cxf</include>-->
        <!--</includes>-->
        <!--<excludes>-->
        <!--<exclude>org.springframework:*</exclude>-->
        <!--<exclude>org.mule.modules:mule-module-spring-config</exclude>-->
        <!--<exclude>net.sf.saxon:*</exclude>-->
        <!--</excludes>-->
        <!--</dependencySet>-->

        <!-- scheduling module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/scheduler</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-scheduler</include>
            </includes>
        </dependencySet>

        <!-- Atom module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/atom</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-atom</include>
            </includes>
        </dependencySet>

        <!-- Http module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/http</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-http</include>
            </includes>
        </dependencySet>

        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/ajax</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-ajax</include>
            </includes>
        </dependencySet>

        <!-- Guice module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/guice</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-guice</include>
            </includes>
        </dependencySet>

        <!-- XML module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/xml</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-xml</include>
            </includes>
        </dependencySet>

        <dependencySet>
            <outputDirectory>mule-ibeans/lib/modules/deployed/spring</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:ibeans-module-spring</include>
            </includes>
        </dependencySet>

        <!-- TODO exprimental -->

        <!-- jpa module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/notdeployed/jpa</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-jpa</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

    </dependencySets>

</assembly>