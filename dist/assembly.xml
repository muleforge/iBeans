<assembly
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">

    <formats>
        <format>tar.gz</format>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <files>
        <file>
            <source>../core/target/ibeans-core-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib</outputDirectory>
        </file>
        <!-- iBeans Console -->
        <file>
            <source>../console/target/ibeans.war</source>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
        </file>

        <file>
            <source>../examples/gpswalker/target/gpswalker.war</source>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
        </file>
        <file>
            <source>../examples/notifications/target/notifications.war</source>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
        </file>
        <file>
            <source>../examples/web/target/web-examples.war</source>
            <outputDirectory>mule-ibeans/webapps</outputDirectory>
        </file>
        <file>
            <source>../modules/ajax/target/ibeans-module-ajax-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/atom/target/ibeans-module-atom-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/email/target/ibeans-module-email-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/http/target/ibeans-module-http-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/jms-client/target/ibeans-module-jms-client-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/guice/target/ibeans-module-guice-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/scheduler/target/ibeans-module-scheduler-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>

        <file>
            <source>../modules/spring/target/ibeans-module-spring-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/rest/target/ibeans-module-rest-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../modules/xml/target/ibeans-module-xml-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/lib/modules/deployed</outputDirectory>
        </file>
        <file>
            <source>../tools/shell/target/ibeans-shell-${version}-full.jar</source>
            <outputDirectory>mule-ibeans/tools/shell</outputDirectory>
            <destName>ibeans-shell-full.jar</destName>
        </file>
    </files>
    <fileSets>
        <fileSet>
            <directory>src/main/resources</directory>
            <outputDirectory>mule-ibeans</outputDirectory>
            <excludes>
                <exclude>conf</exclude>
            </excludes>
        </fileSet>
        <!-- updater tool -->
        <fileSet>
            <directory>../tools/updater/target</directory>
            <outputDirectory>mule-ibeans/tools</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <!-- Shell tool -->
        <fileSet>
            <directory>../tools/shell/src/main/resources</directory>
            <outputDirectory>mule-ibeans/tools/shell</outputDirectory>
            <includes>
                <include>*.*</include>
            </includes>
            <excludes>
                <exclude>ibeanssh*</exclude>
                <exclude>cp*</exclude>
            </excludes>
        </fileSet>

        <fileSet>
            <directory>../tools/shell/src/main/resources</directory>
            <outputDirectory>mule-ibeans/tools/shell</outputDirectory>
            <includes>
                <include>ibeanssh*</include>
                <include>cp*</include>
            </includes>
            <fileMode>755</fileMode>
        </fileSet>
        <!-- template projects -->
        <!-- iBeans project template -->
        <fileSet>
            <directory>../tools/archetype-tests/ibean/target/template</directory>
            <outputDirectory>mule-ibeans/templates/ibean-template</outputDirectory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>**/.settings</exclude>
                <exclude>**/target</exclude>
            </excludes>

        </fileSet>

        <!-- iBeans webapp template -->
        <fileSet>
            <directory>../tools/archetype-tests/ibeans-webapp/target/template</directory>
            <outputDirectory>mule-ibeans/templates/webapp-template</outputDirectory>
            <includes>
                <include>**</include>
            </includes>
            <excludes>
                <exclude>**/.settings</exclude>
                <exclude>**/target</exclude>
            </excludes>
        </fileSet>
    </fileSets>

    <dependencySets>
        <!-- Core module -->
        <dependencySet>
            <outputDirectory>mule-ibeans/lib/ibeans/deployed</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>false</useTransitiveFiltering>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <includes>
                <include>org.mule.ibeans:twitter-ibean</include>
                <include>org.mule.ibeans:flickr-ibean</include>
                <include>org.mule.ibeans:gmail-ibean</include>
                <include>org.mule.ibeans:hostip-ibean</include>
                <include>org.mule.ibeans:bitly-ibean</include>
                <include>org.mule.ibeans:googlebase-ibean</include>
            </includes>
        </dependencySet>

        <dependencySet>
            <outputDirectory>mule-ibeans/lib</outputDirectory>
            <scope>runtime</scope>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <includes>
                <!-- include Log4j separately so folks can mess with the version -->
                <include>log4j:log4j</include>
                <include>org.slf4j:slf4j-log4j12</include>
                <include>org.slf4j:jcl104-over-slf4j</include>
                <include>org.slf4j:slf4j-api</include>
            </includes>
        </dependencySet>


        <!-- shell module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/shell</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-shell</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- email module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/email</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-email</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- jms module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/jms-client</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-jms-client</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- Rest module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/rest</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-rest</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- scheduling module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/scheduler</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-scheduler</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- Atom module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/atom</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-atom</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- Http module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/http</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-http</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/ajax</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-ajax</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- Guice module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/guice</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-guice</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!-- XML module -->
        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/xml</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-xml</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

        <!--<dependencySet>-->
        <!--<outputDirectory>mule-ibeans/lib/modules/deployed/spring</outputDirectory>-->
        <!--<scope>runtime</scope>-->
        <!--<useTransitiveFiltering>true</useTransitiveFiltering>-->
        <!--<useTransitiveDependencies>true</useTransitiveDependencies>-->
        <!--<includes>-->
        <!--<include>org.mule.ibeans:ibeans-module-spring</include>-->
        <!--</includes>-->
        <!--</dependencySet>-->

    </dependencySets>

</assembly>